<script>
export default {
  props: {
    type: {
      type: String,
      default: 'text',
    },
    name: {
      type: String,
      default: null,
    },
    maxlength: {
      type: Number,
      default: null,
    },
    icon: {
      type: String,
      default: null,
    },
    iconSecond: {
      type: String,
      default: null,
    },
    placeholder: {
      type: String,
      default: null,
    },
    error: {
      type: Boolean,
      default: false,
    },
    value: {
      type: String,
      default: null,
    },
  },
  methods: {
    changeType(from) {
      if (from == 'eye') {
        this.icon = 'eye-off';
        this.type = 'text';
      } else {
        this.icon = 'eye';
        this.type = 'password';
      }
    },
  },
};
</script>

<template>
  <div class="base-input">
    <input
      :type="type"
      :name="name"
      :maxlength="maxlength"
      :placeholder="placeholder"
      :class="{ is_error: error }"
      :value="value"
      class="base-input__input"
      @input="$emit('input', $event.target.value)"
    />

    <!-- <div 
      v-if="error" 
      class="base-input__error">
      {{ error }}
    </div> -->

    <svg
      v-if="iconSecond === 'save'"
      :class="['base-input__icon-second_' + iconSecond]"
      class="base-input__icon-second"
      viewBox="0 0 18 18"
    >
      <path
        d="M12 6V2.01562H2.01562V6H12ZM6.89062 15.0938C7.48438 15.6875 8.1875 15.9844 9 15.9844C9.8125 15.9844 10.5156 15.6875 11.1094 15.0938C11.7031 14.5 12 13.7969 12 12.9844C12 12.1719 11.7031 11.4688 11.1094 10.875C10.5156 10.2812 9.8125 9.98438 9 9.98438C8.1875 9.98438 7.48438 10.2812 6.89062 10.875C6.29688 11.4688 6 12.1719 6 12.9844C6 13.7969 6.29688 14.5 6.89062 15.0938ZM14.0156 0L18 3.98438V15.9844C18 16.5156 17.7969 16.9844 17.3906 17.3906C16.9844 17.7969 16.5156 18 15.9844 18H2.01562C1.45312 18 0.96875 17.8125 0.5625 17.4375C0.1875 17.0312 0 16.5469 0 15.9844V2.01562C0 1.45312 0.1875 0.984375 0.5625 0.609375C0.96875 0.203125 1.45312 0 2.01562 0H14.0156Z"
      />
    </svg>

    <svg
      v-if="icon === 'folder'"
      :class="['base-input__icon_' + icon]"
      class="base-input__icon"
      viewBox="0 0 20 18"
    >
      <path
        d="M18.0156 15V5.01562H1.98438V15H18.0156ZM18.0156 3C18.5469 3 19 3.20312 19.375 3.60938C19.7812 4.01563 19.9844 4.48438 19.9844 5.01562V15C19.9844 15.5312 19.7812 16 19.375 16.4062C19 16.8125 18.5469 17.0156 18.0156 17.0156H1.98438C1.45312 17.0156 0.984375 16.8125 0.578125 16.4062C0.203125 16 0.015625 15.5312 0.015625 15V3C0.015625 2.46875 0.203125 2 0.578125 1.59375C0.984375 1.1875 1.45312 0.984375 1.98438 0.984375H7.98438L10 3H18.0156Z"
      />
    </svg>

    <svg
      v-if="icon === 'key'"
      :class="['base-input__icon_' + icon]"
      class="base-input__icon"
      viewBox="0 0 24 12"
    >
      <path
        d="M5.57812 7.40625C5.98438 7.8125 6.45312 8.01562 6.98438 8.01562C7.51562 8.01562 7.98438 7.8125 8.39062 7.40625C8.79688 7 9 6.53125 9 6C9 5.46875 8.79688 5 8.39062 4.59375C7.98438 4.1875 7.51562 3.98438 6.98438 3.98438C6.45312 3.98438 5.98438 4.1875 5.57812 4.59375C5.20312 5 5.01562 5.46875 5.01562 6C5.01562 6.53125 5.20312 7 5.57812 7.40625ZM12.6562 3.98438H23.0156V8.01562H21V12H17.0156V8.01562H12.6562C12.25 9.20312 11.5312 10.1719 10.5 10.9219C9.46875 11.6406 8.29688 12 6.98438 12C5.32812 12 3.90625 11.4219 2.71875 10.2656C1.5625 9.07812 0.984375 7.65625 0.984375 6C0.984375 4.34375 1.5625 2.9375 2.71875 1.78125C3.90625 0.59375 5.32812 0 6.98438 0C8.29688 0 9.46875 0.375 10.5 1.125C11.5312 1.84375 12.25 2.79688 12.6562 3.98438Z"
      />
    </svg>

    <svg
      v-if="icon === 'secret'"
      :class="['base-input__icon_' + icon]"
      class="base-input__icon"
      viewBox="0 0 18 22"
    >
      <path
        d="M15 20.0156V9.98438H3V20.0156H15ZM5.90625 6V8.01562H12.0938V6C12.0938 5.15625 11.7812 4.4375 11.1562 3.84375C10.5625 3.21875 9.84375 2.90625 9 2.90625C8.15625 2.90625 7.42188 3.21875 6.79688 3.84375C6.20312 4.4375 5.90625 5.15625 5.90625 6ZM15 8.01562C15.5312 8.01562 16 8.21875 16.4062 8.625C16.8125 9 17.0156 9.45312 17.0156 9.98438V20.0156C17.0156 20.5469 16.8125 21.0156 16.4062 21.4219C16 21.7969 15.5312 21.9844 15 21.9844H3C2.46875 21.9844 2 21.7969 1.59375 21.4219C1.1875 21.0156 0.984375 20.5469 0.984375 20.0156V9.98438C0.984375 9.45312 1.1875 9 1.59375 8.625C2 8.21875 2.46875 8.01562 3 8.01562H3.98438V6C3.98438 4.625 4.46875 3.45313 5.4375 2.48438C6.4375 1.48438 7.625 0.984375 9 0.984375C10.375 0.984375 11.5469 1.48438 12.5156 2.48438C13.5156 3.45313 14.0156 4.625 14.0156 6V8.01562H15ZM10.4062 16.4062C10 16.8125 9.53125 17.0156 9 17.0156C8.46875 17.0156 8 16.8125 7.59375 16.4062C7.1875 16 6.98438 15.5312 6.98438 15C6.98438 14.4688 7.1875 14 7.59375 13.5938C8 13.1875 8.46875 12.9844 9 12.9844C9.53125 12.9844 10 13.1875 10.4062 13.5938C10.8125 14 11.0156 14.4688 11.0156 15C11.0156 15.5312 10.8125 16 10.4062 16.4062Z"
      />
    </svg>

    <svg
      v-if="icon === 'user'"
      :class="['base-input__icon_' + icon]"
      class="base-input__icon"
      viewBox="0 0 18 18"
    >
      <path
        d="M3.70312 12.1406C5.54688 11.3906 7.3125 11.0156 9 11.0156C10.6875 11.0156 12.4375 11.3906 14.25 12.1406C16.0938 12.8594 17.0156 13.8125 17.0156 15V17.0156H0.984375V15C0.984375 13.8125 1.89062 12.8594 3.70312 12.1406ZM11.8125 7.82812C11.0312 8.60938 10.0938 9 9 9C7.90625 9 6.96875 8.60938 6.1875 7.82812C5.40625 7.04688 5.01562 6.10938 5.01562 5.01562C5.01562 3.92188 5.40625 2.98438 6.1875 2.20312C6.96875 1.39063 7.90625 0.984375 9 0.984375C10.0938 0.984375 11.0312 1.39063 11.8125 2.20312C12.5938 2.98438 12.9844 3.92188 12.9844 5.01562C12.9844 6.10938 12.5938 7.04688 11.8125 7.82812Z"
      />
    </svg>

    <svg
      v-if="icon === 'email'"
      :class="['base-input__icon_' + icon]"
      class="base-input__icon"
      viewBox="0 0 20 18"
    >
      <path
        d="M18.0156 5.01562V3L10 8.01562L1.98438 3V5.01562L10 9.98438L18.0156 5.01562ZM18.0156 0.984375C18.5469 0.984375 19 1.1875 19.375 1.59375C19.7812 2 19.9844 2.46875 19.9844 3V15C19.9844 15.5312 19.7812 16 19.375 16.4062C19 16.8125 18.5469 17.0156 18.0156 17.0156H1.98438C1.45312 17.0156 0.984375 16.8125 0.578125 16.4062C0.203125 16 0.015625 15.5312 0.015625 15V3C0.015625 2.46875 0.203125 2 0.578125 1.59375C0.984375 1.1875 1.45312 0.984375 1.98438 0.984375H18.0156Z"
      />
    </svg>

    <div
      v-if="icon === 'eye'"
      class="base-input__icon_div base-input__icon_eye"
      @click="changeType('eye')"
    >
      <svg
        :class="['base-input__icon_' + icon]"
        class="base-input__icon"
        viewBox="0 0 24 16"
      >
        <path
          d="M9.89062 5.89062C10.4844 5.29688 11.1875 5 12 5C12.8125 5 13.5156 5.29688 14.1094 5.89062C14.7031 6.48438 15 7.1875 15 8C15 8.8125 14.7031 9.51562 14.1094 10.1094C13.5156 10.7031 12.8125 11 12 11C11.1875 11 10.4844 10.7031 9.89062 10.1094C9.29688 9.51562 9 8.8125 9 8C9 7.1875 9.29688 6.48438 9.89062 5.89062ZM8.4375 11.5625C9.4375 12.5312 10.625 13.0156 12 13.0156C13.375 13.0156 14.5469 12.5312 15.5156 11.5625C16.5156 10.5625 17.0156 9.375 17.0156 8C17.0156 6.625 16.5156 5.45312 15.5156 4.48438C14.5469 3.48438 13.375 2.98438 12 2.98438C10.625 2.98438 9.4375 3.48438 8.4375 4.48438C7.46875 5.45312 6.98438 6.625 6.98438 8C6.98438 9.375 7.46875 10.5625 8.4375 11.5625ZM5.29688 2.5625C7.29688 1.1875 9.53125 0.5 12 0.5C14.4688 0.5 16.7031 1.1875 18.7031 2.5625C20.7031 3.9375 22.1406 5.75 23.0156 8C22.1406 10.25 20.7031 12.0625 18.7031 13.4375C16.7031 14.8125 14.4688 15.5 12 15.5C9.53125 15.5 7.29688 14.8125 5.29688 13.4375C3.29688 12.0625 1.85938 10.25 0.984375 8C1.85938 5.75 3.29688 3.9375 5.29688 2.5625Z"
        />
      </svg>
    </div>

    <div
      v-if="icon === 'eye-off'"
      class="base-input__icon_div base-input__icon_eye-off"
      @click="changeType('eye-off')"
    >
      <svg
        :class="['base-input__icon_' + icon]"
        class="base-input__icon"
        viewBox="0 0 23 19"
      >
        <path
          d="M11.8594 6H12C12.8125 6 13.5156 6.29688 14.1094 6.89062C14.7031 7.48438 15 8.1875 15 9V9.1875L11.8594 6ZM7.54688 6.79688C7.17188 7.54688 6.98438 8.28125 6.98438 9C6.98438 10.375 7.46875 11.5625 8.4375 12.5625C9.4375 13.5312 10.625 14.0156 12 14.0156C12.7188 14.0156 13.4531 13.8281 14.2031 13.4531L12.6562 11.9062C12.4062 11.9688 12.1875 12 12 12C11.1875 12 10.4844 11.7031 9.89062 11.1094C9.29688 10.5156 9 9.8125 9 9C9 8.8125 9.03125 8.59375 9.09375 8.34375L7.54688 6.79688ZM2.01562 1.26562L3.28125 0L21 17.7188L19.7344 18.9844C19.5781 18.8281 19.0781 18.3438 18.2344 17.5312C17.4219 16.7188 16.7969 16.0938 16.3594 15.6562C15.0156 16.2188 13.5625 16.5 12 16.5C9.53125 16.5 7.29688 15.8125 5.29688 14.4375C3.29688 13.0625 1.85938 11.25 0.984375 9C1.76562 7.0625 3.01562 5.40625 4.73438 4.03125C4.35938 3.65625 3.82812 3.125 3.14062 2.4375C2.48438 1.75 2.10938 1.35938 2.01562 1.26562ZM12 3.98438C11.375 3.98438 10.7656 4.10938 10.1719 4.35938L8.01562 2.20312C9.23438 1.73438 10.5625 1.5 12 1.5C14.4688 1.5 16.6875 2.1875 18.6562 3.5625C20.6562 4.9375 22.0938 6.75 22.9688 9C22.2188 10.8438 21.0781 12.4219 19.5469 13.7344L16.6406 10.8281C16.8906 10.2344 17.0156 9.625 17.0156 9C17.0156 7.625 16.5156 6.45312 15.5156 5.48438C14.5469 4.48438 13.375 3.98438 12 3.98438Z"
        />
      </svg>
    </div>
  </div>
</template>

<style lang="scss">
.base-input {
  position: relative;
  display: inline-block;

  &__input {
    $size: 16px;
    font-size: em($size);
    font-family: $font-Circe;
    width: 100%;
    height: em(48px);
    padding: 0 em(60px, $size) 0 em(24px, $size);
    box-sizing: border-box;
    border: 2px solid $grey;
    border-radius: em(6px, $size);
    background-color: $white;
    outline: none;

    &.is_error {
      border-color: $red;
    }
  }

  &__error {
    position: absolute;
    color: $red;
    width: em(200px);
    right: em(-230px);
    top: 50%;
    transform: translateY(-50%);
  }

  &__icon {
    position: absolute;
    right: em(18px);
    top: 50%;
    transform: translateY(-50%);
    fill: $grey;
    pointer-events: none;

    &_folder {
      width: em(20px);
      height: em(18px);
    }
    &_key {
      width: em(24px);
      height: em(12px);
    }
    &_secret {
      width: em(18px);
      height: em(22px);
    }
    &_user {
      width: em(18px);
      height: em(18px);
    }
    &_email {
      width: em(20px);
      height: em(18px);
    }
    &_eye {
      position: absolute;
      right: 0.525em;
      top: 40%;
      cursor: pointer;
      width: em(24px);
      height: em(16px);
    }
    &_eye-off {
      position: absolute;
      right: 0.525em;
      top: 40%;
      cursor: pointer;
      width: em(24px);
      height: em(16px);
    }
  }
  &__icon-second {
    position: absolute;
    right: em(43px);
    top: 50%;
    transform: translateY(-50%);
    fill: $grey;

    cursor: pointer;
    &_save {
      width: em(22px);
      height: em(16px);
      transition: fill $speed;
      &:hover {
        fill: $black;
      }
      &:active {
        fill: $blue;
      }
    }
  }
  /*&__icon_div {*/
  /*  position: absolute;*/
  /*  right: em(18px);*/
  /*  top: 50%;*/
  /*  cursor: pointer;*/
  /*}*/
}
</style>
